<div id="content_detail" class="ui-corner-all">
<h1 class="title"><%= t('activerecord.models.statistic_report') -%></h1>
<div id="content_list">
<div style="color: green"><%= flash[:message] -%></div>
<table class="index">
  <tr>
    <th><%= t('activerecord.attributes.statistic_report.type') -%></th>
    <th><%= t('activerecord.attributes.statistic_report.term') -%></th>
    <th>&nbsp;</th>
    <th>&nbsp;</th>
  </tr>

<% if SystemConfiguration.get('statistic_report.yearly_public')%>
  <%= form_tag :action => :get_report, :id => 'form' do %>
    <tr class="line<%= cycle("0", "1") %>">
      <td><%= t('statistic_report.yearly_report') %></td>
      <td>
        <%= text_field_tag :yearly_start_at, (@yearly_start_at if @yearly_start_at), :class => "resource_integer" %>
        -
        <%= text_field_tag :yearly_end_at, (@yearly_end_at if @yearly_end_at), :class => "resource_integer" %>
        <%= t('statistic_report.year') %>
        <%= hidden_field_tag :type, 'yearly' %>
      </td>
      <td><%= submit_tag t('statistic_report.submit'), :name => 'pdf' %></td>
      <td></td>
    </tr>
  <% end %>
<% end %>

<% if SystemConfiguration.get('statistic_report.monthly_public') %>
  <tr class="line<%= cycle("0", "1") -%>">
    <%= form_tag(:action => :get_monthly_report)  do -%>
      <td><%= t('statistic_report.monthly_report') -%></td>
      <td><%= text_field_tag :term, (@year if @year), :class => "resource_integer" %>  <%= t('statistic_report.year') -%></td>
      <td><%= submit_tag t('statistic_report.submit') %></td>
      <td><%= submit_tag(t('statistic_report.submit_tsv'), :name => "tsv") %></td>
    <%- end -%>
  </tr>
<%- end -%>

<%- if SystemConfiguration.get('statistic_report.daily_public') %>
  <tr class="line<%= cycle("0", "1") -%>">
    <%= form_tag(:action => :get_daily_report)  do -%>
      <td><%= t('statistic_report.daily_report') -%></td>
      <td><%= text_field_tag :term, (@month if @month), :class => "resource_integer" %>  <%= t('statistic_report.month_ex') -%></td>
      <td><%= submit_tag t('statistic_report.submit') %></td>
      <td><%= submit_tag(t('statistic_report.submit_tsv'), :name => "tsv") %></td>
    <%- end -%>
  </tr>
<%- end -%>

<%- if SystemConfiguration.get('statistic_report.timezone_public') %>
  <tr class="line<%= cycle("0", "1") -%>">
<script>
$(function(){
  if (typeof $('#timezone_start_at').setCalendar == "function") {
    $('#timezone_start_at').setCalendar({src:'/assets/calendar.png'});
    $('#timezone_end_at').setCalendar({src:'/assets/calendar.png'});
  }
});
</script>
    <%= form_tag(:action => :get_timezone_report)  do -%>
      <td><%= t('statistic_report.timezone_report') -%></td>
      <td><%= text_field_tag :timezone_start_at, (@t_start_at if @t_start_at), :class => "resource_integer" %> - <%= text_field_tag :timezone_end_at, (@t_end_at if @t_end_at), :class => "resource_integer" %>  
          <%= t('statistic_report.day') -%></td>
      <td><%= submit_tag t('statistic_report.submit') %></td>
      <td><%= submit_tag(t('statistic_report.submit_tsv'), :name => "tsv") %></td>
    <%- end -%>
  </tr>
<%- end -%>

<%- if SystemConfiguration.get('statistic_report.day_public') %>
  <tr class="line<%= cycle("0", "1") -%>">
<script>
$(function(){
  if (typeof $('#day_start_at').setCalendar == "function") {
    $('#day_start_at').setCalendar({src:'/assets/calendar.png'});
    $('#day_end_at').setCalendar({src:'/assets/calendar.png'});
  }
});
</script>
    <%= form_tag(:action => :get_day_report)  do -%>
      <td><%= t('statistic_report.day_report') -%></td>
      <td><%= text_field_tag :day_start_at, (@d_start_at if @d_start_at), :class => "resource_integer" %> - <%= text_field_tag :day_end_at, (@d_end_at if @d_end_at), :class => "resource_integer" %>
          <%= t('statistic_report.day') -%></td>
      <td><%= submit_tag t('statistic_report.submit') %></td>
      <td><%= submit_tag(t('statistic_report.submit_tsv'), :name => "tsv") %></td>
    <%- end -%>
  </tr>
<%- end -%>

<%- if SystemConfiguration.get('statistic_report.age_public') %>
  <tr class="line<%= cycle("0", "1") -%>">
<script>
$(function(){
  if (typeof $('#age_start_at').setCalendar == "function") {
    $('#age_start_at').setCalendar({src:'/assets/calendar.png'});
    $('#age_end_at').setCalendar({src:'/assets/calendar.png'});
  }
});
</script>
    <%= form_tag(:action => :get_age_report)  do -%>
      <td><%= t('statistic_report.age_report') -%></td>
      <td><%= text_field_tag :age_start_at, (@a_start_at if @a_start_at), :class => "resource_integer" %> - <%= text_field_tag :age_end_at, (@a_end_at if @a_end_at), :class => "resource_integer" %>
          <%= t('statistic_report.day') -%></td>
      <td><%= submit_tag t('statistic_report.submit') %></td>
      <td><%= submit_tag(t('statistic_report.submit_tsv'), :name => "tsv") %></td>
    <%- end -%>
  </tr>
<%- end -%>

<%# if SystemConfiguration.get('statistic_report.manifestation_public') %>
  <tr class="line<%= cycle("0", "1") %>">
    <td><%= t('statistic_report.manifestations_report') %></td>
    <%= form_tag(:action => :get_items_report)  do %>
      <td>
        <%= text_field_tag :term, (@items_year if @items_year), :class => "resource_integer" %>
        <%= t('statistic_report.year') %>
      </td>
      <td><%= submit_tag t('statistic_report.submit') %></td>
      <td></td> 
    <% end %>
  </tr>
<%# end %>

<% if SystemConfiguration.get('statistic_report.users') %>
  <%= form_tag :action => :get_report, :id => 'form' do %>
    <tr class="line<%= cycle("0", "1") %>">
      <td><%= t('statistic_report.users_report') %></td>
      <td>
        <%= text_field_tag :users_term, (@users_term if @users_term), :class => "resource_integer" %>
        <%= t('statistic_report.year') %>
        <%= hidden_field_tag :type, 'users' %>
      </td>
      <td><%= submit_tag t('statistic_report.submit'), :name => 'pdf' %></td>
      <td></td>
    </tr>
  <% end %>
<% end %>

<% if SystemConfiguration.get('statistic_report.departments_report') %>
  <%= form_tag :action => :get_report, :id => 'form' do %>
    <tr class="line<%= cycle("0", "1") %>">
      <td><%= t('statistic_report.departments_report') %></td>
      <td>
        <%= text_field_tag :department_term, (@departments_year if @departments_year), :class => "resource_integer" %>
        <%= t('statistic_report.year') %>
        <%= hidden_field_tag :type, 'departments' %>
      </td>
      <td><%= submit_tag t('statistic_report.submit'), :name => 'pdf' %></td>
      <td></td>
    </tr>
  <% end %>
<% end %>

<%- if SystemConfiguration.get('statistic_report.items') %>
  <tr class="line<%= cycle("0", "1") -%>">
    <%= form_tag(:action => :get_items_report)  do -%>
      <td><%= t('statistic_report.items_report') -%></td>
      <td><%= text_field_tag :term, (@items_year if @items_year), :class => "resource_integer" %>
          <%= t('statistic_report.year_or_month') -%></td>
      <td><%= submit_tag t('statistic_report.submit') %></td>
      <td><%= submit_tag(t('statistic_report.submit_tsv'), :name => "tsv") %></td>
    <%- end -%>
  </tr>
<%- end -%>

<%- if SystemConfiguration.get('statistic_report.inouts') %>
  <tr class="line<%= cycle("0", "1") -%>">
    <%= form_tag(:action => :get_inout_items_report)  do -%>
      <td><%= t('statistic_report.inout_items_report') -%></td>
      <td><%= text_field_tag :term, (@inout_term if @inout_term), :class=>"resource_integer" %>  <%= t('statistic_report.year_or_month') -%></td>
      <td><%= submit_tag t('statistic_report.submit') %></td>
      <td><%= submit_tag(t('statistic_report.submit_tsv'), :name => "tsv") %></td>
    <%- end -%>
  </tr>
<%- end -%>

<%- if SystemConfiguration.get('statistic_report.inter_library_loans') %>
  <tr class="line<%= cycle("0", "1") -%>">
    <%= form_tag(:action => :get_loans_report)  do -%>
      <td><%= t('statistic_report.loans_report') -%></td>
      <td><%= text_field_tag :term, (@loans_term if @loans_term), :class=>"resource_integer" %>  <%= t('statistic_report.year_or_month') -%></td>
      <td><%= submit_tag t('statistic_report.submit') %></td>
      <td><%= submit_tag(t('statistic_report.submit_tsv'), :name => "tsv") %></td>
    <%- end -%>
  </tr>
<%- end -%>

<%- if SystemConfiguration.get('statistic_report.user_group_checkouts') %>
  <tr class="line<%= cycle("0", "1") -%>">
    <%= form_tag(:action => :get_groups_report)  do -%>
      <td><%= t('statistic_report.groups_report') -%></td>
      <td><%= text_field_tag :term, (@group_term if @group_term), :class=>"resource_integer" %>  <%= t('statistic_report.year_or_month') -%></td>
      <td><%= submit_tag t('statistic_report.submit') %></td>
      <td><%= submit_tag(t('statistic_report.submit_tsv'), :name => "tsv") %></td>
    <%- end -%>
  </tr>
<%- end -%>

<%- if SystemConfiguration.get('statistic_report.departments') %>
  <tr class="line<%= cycle("0", "1") -%>">
    <%= form_tag(:action => :get_departments_report)  do -%>
      <td><%= t('statistic_report.departments_extent_report') -%></td>
      <td><%= text_field_tag :term, (@dep_term if @dep_term), :class=>"resource_integer" %>  <%= t('statistic_report.year_or_month') -%></td>
      <td><%= submit_tag t('statistic_report.submit') %></td>
      <td><%= submit_tag(t('statistic_report.submit_tsv'), :name => "tsv") %></td>
    <%- end -%>
  </tr>
<%- end -%>

</table>

</div>
</div>

<div id="submenu" class="ui-corner-all">
  <ul>
    <li><%= link_to t('page.back'), page_exstatistics_path %>
  </ul>
</div>
